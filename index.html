<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kerem Şükrü Keskin | Başlangıç Sayfası</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Genel Sıfırlamalar ve Temel Stiller */
        body {
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center; /* İçeriği dikeyde ortala */
            align-items: center; /* İçeriği yatayda ortala */
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* Bulanık ışıkların taşmasını engelle */
            position: relative; /* Bulanık ışıklar için */
            transition: background-color 0.5s ease; /* Tema geçişi için */
            color: #333; /* Açık tema varsayılan metin rengi */
        }

        /* Tema Tabanlı Arka Plan Renkleri */
        body.light-theme {
            background-color: #ffffff;
            color: #333;
        }

        body.dark-theme {
            background-color: #1a1a1a;
            color: #f0f0f0;
        }

        /* Bulanık Işıklar (Blobs) */
        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px); /* Bulanıklık efekti */
            opacity: 0.6;
            animation: blob-move 20s infinite alternate ease-in-out;
            z-index: -1; /* İçeriğin arkasında kalması için */
        }

        /* Açık Tema Işık Renkleri */
        body.light-theme .blob {
            background-color: rgba(173, 216, 230, 0.7); /* Açık mavi */
        }

        /* Koyu Tema Işık Renkleri */
        body.dark-theme .blob {
            background-color: rgba(65, 105, 225, 0.7); /* Koyu mavi (lacivert değil) */
        }

        /* Blob Boyutları ve Konumları */
        .blob:nth-child(1) {
            width: 300px;
            height: 300px;
            top: 10%;
            left: 15%;
            animation-delay: 0s;
        }

        .blob:nth-child(2) {
            width: 400px;
            height: 400px;
            bottom: 20%;
            right: 10%;
            animation-delay: 5s;
        }

        .blob:nth-child(3) {
            width: 250px;
            height: 250px;
            top: 30%;
            right: 20%;
            animation-delay: 10s;
        }

        .blob:nth-child(4) {
            width: 350px;
            height: 350px;
            bottom: 5%;
            left: 30%;
            animation-delay: 15s;
        }

        /* Blob Animasyonu */
        @keyframes blob-move {
            0% {
                transform: translate(0, 0) scale(1);
            }
            25% {
                transform: translate(20px, -30px) scale(1.1);
            }
            50% {
                transform: translate(-10px, 40px) scale(0.9);
            }
            75% {
                transform: translate(30px, 10px) scale(1.05);
            }
            100% {
                transform: translate(0, 0) scale(1);
            }
        }

        /* Ana İçerik Konteyneri */
        .main-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1; /* İçeriğin bulanık ışıkların üzerinde kalması için */
            width: 100%;
            max-width: 900px;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Başlık */
        .title {
            text-align: center;
            font-size: 2.5em;
            font-weight: 700;
            color: inherit; /* Tema rengini miras al */
            transition: color 0.5s ease;
            z-index: 2; /* Diğer elementlerin üzerinde kalması için */
            margin-bottom: 40px; /* Arama kutusuyla arasındaki boşluk */
        }

        /* Hava Durumu Widget'ı */
        .weather-widget {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: rgba(255, 255, 255, 0.1); /* Hafif şeffaf arka plan */
            backdrop-filter: blur(10px); /* Arka planı bulanıklaştır */
            border-radius: 12px;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: inherit; /* Tema rengini miras al */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        body.dark-theme .weather-widget {
            background-color: rgba(0, 0, 0, 0.2);
        }

        .weather-icon {
            font-size: 2.5em; /* Font Awesome ikon boyutu */
            color: inherit; /* Temaya göre renk alsın */
            display: block; /* İkonu tekrar göster */
            width: 50px; /* Kutuyla aynı boyutta olması için */
            text-align: center; /* İkonu ortala */
        }

        .weather-info {
            display: flex;
            flex-direction: column;
            font-size: 0.9em;
        }

        .weather-info .temp {
            font-size: 1.5em;
            font-weight: 600;
        }

        /* Nem ve Konum için aynı punto */
        .weather-info .info-text {
            font-size: 0.9em;
            margin-top: 2px; /* Elemanlar arası biraz boşluk */
        }

        /* Saat Widget'ı */
        .clock-widget {
            position: absolute;
            top: 20px;
            right: 20px; /* Sağa hizala */
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 15px 20px;
            display: flex;
            flex-direction: column; /* Dikey sıralama */
            align-items: flex-end; /* İçeriği sağ tarafa hizala */
            gap: 5px; /* Elemanlar arası boşluk */
            color: inherit;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        body.dark-theme .clock-widget {
            background-color: rgba(0, 0, 0, 0.2);
        }

        .clock-widget .time-display {
            font-size: 1.8em; /* Saatin ana boyutu */
            font-weight: 600;
            display: flex;
            gap: 2px; /* Saat, dakika, saniye arası boşluk */
            font-variant-numeric: tabular-nums; /* Sayıların sabit genişlikte olmasını sağlar */
            text-align: right; /* Saati sağa hizala */
        }

        .clock-widget .date-display {
            font-size: 0.9em; /* Tarih bilgisi boyutu */
            text-align: right; /* Tarihi sağa hizala */
        }

        /* Arama Çubuğu */
        .search-form {
            display: flex;
            width: 100%;
            max-width: 600px; /* Chrome'a benzer boyut */
            background-color: rgba(255, 255, 255, 0.15); /* Hafif şeffaf */
            backdrop-filter: blur(10px);
            border-radius: 30px; /* Yuvarlak köşeler */
            padding: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: background-color 0.5s ease, box-shadow 0.3s ease;
        }

        body.dark-theme .search-form {
            background-color: rgba(0, 0, 0, 0.3);
        }

        .search-form:focus-within {
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.2);
        }

        .search-input {
            flex-grow: 1;
            border: none;
            outline: none;
            background: transparent;
            padding: 10px 20px;
            font-size: 1.1em;
            color: inherit; /* Tema rengini miras al */
        }

        /* Otomatik doldurma arka planını ve metin rengini şeffaf yap */
        .search-input:-webkit-autofill,
        .search-input:-webkit-autofill:hover,
        .search-input:-webkit-autofill:focus,
        .search-input:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0px 1000px transparent inset !important;
            background-color: transparent !important;
            color: inherit !important; /* Metin rengini temaya uygun tut */
            -webkit-text-fill-color: inherit !important; /* Webkit tabanlı tarayıcılar için metin rengini koru */
            font-size: inherit !important; /* Puntoyu koru */
            transition: background-color 5000s ease-in-out 0s; /* Geçişi yavaşlatarak görünmez yap */
        }


        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7); /* Koyu temada daha görünür */
        }

        body.light-theme .search-input::placeholder {
            color: rgba(51, 51, 51, 0.6);
        }

        .search-button {
            background-color: #4285f4; /* Google mavisi */
            color: white;
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease;
        }

        .search-button:hover {
            background-color: #357ae8;
        }

        /* Hızlı Erişim Linkleri */
        .quick-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px; /* Boşluğu azaltıldı */
            margin-top: 25px; /* Arama kutusuyla arasındaki mesafe azaltıldı */
            width: 100%;
            max-width: 600px;
        }

        .quick-link-item {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            border-radius: 50%; /* Yuvarlak yap */
            width: 50px; /* Sabit genişlik, küçültüldü */
            height: 50px; /* Sabit yükseklik, küçültüldü */
            display: flex; /* İçeriği ortalamak için flexbox kullan */
            justify-content: center; /* Yatayda ortala */
            align-items: center; /* Dikeyde ortala */
            text-decoration: none;
            color: inherit;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        body.dark-theme .quick-link-item {
            background-color: rgba(0, 0, 0, 0.2);
        }

        .quick-link-item:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        body.dark-theme .quick-link-item:hover {
            background-color: rgba(0, 0, 0, 0.4);
        }

        /* SVG ikonları için stil */
        .quick-link-item .icon {
            width: 60%; /* SVG ikonun boyutunu kapsayıcıya göre ayarla */
            height: 60%;
            color: inherit; /* Temaya göre renk alsın */
        }

        /* Font Awesome ikonları için stil */
        .quick-link-item i.fas {
            font-size: 26px; /* Font Awesome ikonları için daha dengeli boyut */
            color: inherit; /* Temaya göre renk alsın */
        }

        /* Hata Mesajı */
        .error-message {
            color: #e74c3c;
            margin-top: 15px;
            font-weight: 600;
            text-align: center;
            display: none; /* Varsayılan olarak gizli */
        }

        /* Responsive Ayarlar */
        @media (max-width: 768px) {
            body {
                padding-top: 0;
            }
            .title {
                font-size: 1.8em;
                margin-bottom: 30px;
            }

            .weather-widget {
                top: 10px;
                left: 10px;
                padding: 10px 15px;
                font-size: 0.8em;
            }
            .weather-info .temp {
                font-size: 1.2em;
            }
            .weather-icon {
                font-size: 2em;
            }

            .clock-widget {
                top: 10px;
                right: 10px;
                padding: 10px 15px;
            }
            .clock-widget .time-display {
                font-size: 1.5em;
            }
            .clock-widget .date-display {
                font-size: 0.8em;
            }

            .search-form {
                max-width: 90%;
                padding: 6px;
            }
            .search-input {
                    font-size: 1em;
                    padding: 8px 15px;
            }
            .search-button {
                padding: 8px 15px;
                font-size: 0.9em;
            }

            .quick-links {
                gap: 10px;
                margin-top: 20px;
            }
            .quick-link-item {
                width: 45px;
                height: 45px;
            }
            /* Responsive'de ikon boyutunu ayarla */
            .quick-link-item .icon {
                width: 65%; /* SVG ikonlar için responsive boyut */
                height: 65%;
            }
            .quick-link-item i.fas {
                font-size: 24px; /* Font Awesome ikonları için responsive boyut */
            }
        }

        @media (max-width: 480px) {
            body {
                padding-top: 0;
            }
            .title {
                font-size: 1.5em;
                margin-bottom: 20px;
            }
            .weather-widget {
                font-size: 0.7em;
                padding: 8px 12px;
            }
            .weather-icon {
                font-size: 1.8em;
            }

            .clock-widget {
                top: 10px;
                right: 10px;
                padding: 8px 12px;
            }
            .clock-widget .time-display {
                font-size: 1.3em;
            }
            .clock-widget .date-display {
                font-size: 0.7em;
            }

            .search-form {
                flex-direction: column;
                border-radius: 15px;
                padding: 0;
            }
            .search-input {
                width: calc(100% - 30px);
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 15px 15px 0 0;
                padding: 15px;
                text-align: center;
            }
            body.light-theme .search-input {
                border-bottom: 1px solid rgba(51, 51, 51, 0.2);
            }
            .search-button {
                width: 100%;
                border-radius: 0 0 15px 15px;
                padding: 15px;
            }
            .quick-links {
                flex-direction: row;
                flex-wrap: wrap;
                align-items: center;
                gap: 8px;
                margin-top: 15px;
            }
            .quick-link-item {
                width: 40px;
                height: 40px;
            }
            /* Responsive'de ikon boyutunu ayarla */
            .quick-link-item .icon {
                width: 60%; /* SVG ikonlar için responsive boyut */
                height: 60%;
            }
            .quick-link-item i.fas {
                font-size: 20px; /* Font Awesome ikonları için responsive boyut */
            }
        }
    </style>
</head>
<body class="light-theme">
    <div class="blob"></div>
    <div class="blob"></div>
    <div class="blob"></div>
    <div class="blob"></div>

    <div class="main-content">
        <h1 class="title">Kerem Şükrü Keskin</h1>

        <form action="https://www.google.com/search" method="get" class="search-form" target="_blank" id="searchForm">
            <input type="text" name="q" id="searchInput" class="search-input" placeholder="Google'da Ara..." autofocus>
            <button type="submit" class="search-button">Ara</button>
        </form>

        <div class="quick-links">
            <!-- Gmail simgesi YouTube'un önüne eklendi -->
            <a href="https://mail.google.com/" target="_blank" class="quick-link-item">
                <i class="fas fa-envelope"></i>
            </a>
            <a href="https://youtube.com" target="_blank" class="quick-link-item">
                <svg viewBox="0 0 24 24" fill="currentColor" class="icon">
                    <path d="M21.54 6.54a3.1 3.1 0 0 0-2.19-2.19C17.82 4 12 4 12 4s-5.82 0-7.35.35a3.1 3.1 0 0 0-2.19 2.19C2 8.18 2 12 2 12s0 3.82.35 5.35a3.1 3.1 0 0 0 2.19 2.19C6.18 20 12 20 12 20s5.82 0 7.35-.35a3.1 3.1 0 0 0 2.19-2.19C22 15.82 22 12 22 12s0-3.82-.35-5.35zM10 15.5v-7l6 3.5-6 3.5z"/>
                </svg>
            </a>
            <a href="https://chat.openai.com/" target="_blank" class="quick-link-item">
                <svg viewBox="0 0 24 24" fill="currentColor" class="icon">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm3.5 13.5h-7V8.5h7v7zM10 10.5v3h4v-3h-4z"/>
                </svg>
            </a>
            <!-- Gemini simgesi ChatGPT'nin yanına eklendi -->
            <a href="https://gemini.google.com/" target="_blank" class="quick-link-item">
                <!-- Soyut Gemini benzeri simge: İki hafif üst üste binen kare -->
                <svg viewBox="0 0 24 24" fill="currentColor" class="icon">
                    <rect x="3" y="3" width="12" height="12" rx="2" ry="2"/>
                    <rect x="9" y="9" width="12" height="12" rx="2" ry="2"/>
                </svg>
            </a>
        </div>
    </div>

    <div class="weather-widget">
        <i id="weatherIcon" class="weather-icon fas"></i>
        <div class="weather-info">
            <span id="weatherTemp" class="temp"></span>
            <span id="weatherHumidity" class="info-text"></span>
            <span id="weatherCity" class="info-text"></span>
        </div>
    </div>

    <div class="clock-widget">
        <div class="time-display">
            <span id="clockHour" class="time-part hour"></span>:<span id="clockMinute" class="time-part minute"></span>:<span id="clockSecond" class="time-part second"></span>
        </div>
        <div class="date-display">
            <span id="clockDay" class="date-part day"></span> <span id="clockMonth" class="date-part month"></span> <span id="clockYear" class="date-part year"></span> <span id="clockDayOfWeek" class="date-part day-of-week"></span>
        </div>
    </div>

    <p id="errorMessage" class="error-message"></p>

    <script>
        // Visual Crossing API Anahtarınız
        const VISUALCROSSING_API_KEY = 'N7JPMD9V7XRM6PQY7R7TJWZTS';
        const VISUALCROSSING_BASE_URL = 'https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/';

        // Nominatim Ters Coğrafi Kodlama API URL'si
        const NOMINATIM_BASE_URL = 'https://nominatim.openstreetmap.org/reverse';

        const weatherIconElem = document.getElementById('weatherIcon');
        const weatherTempElem = document.getElementById('weatherTemp');
        const weatherHumidityElem = document.getElementById('weatherHumidity');
        const weatherCityElem = document.getElementById('weatherCity');
        const errorMessageElem = document.getElementById('errorMessage');
        const searchInput = document.getElementById('searchInput');
        const searchForm = document.getElementById('searchForm'); // Arama formunu seç

        // Clock elements
        const clockHourElem = document.getElementById('clockHour');
        const clockMinuteElem = document.getElementById('clockMinute');
        const clockSecondElem = document.getElementById('clockSecond');
        const clockDayOfWeekElem = document.getElementById('clockDayOfWeek');
        const clockDayElem = document.getElementById('clockDay');
        const clockMonthElem = document.getElementById('clockMonth');
        const clockYearElem = document.getElementById('clockYear');


        // Tema Algılama ve Uygulama
        function applyTheme(isDark) {
            const body = document.body;
            if (isDark) {
                body.classList.remove('light-theme');
                body.classList.add('dark-theme');
            } else {
                body.classList.remove('dark-theme');
                body.classList.add('light-theme');
            }
        }

        // Cihazın tema tercihini kontrol et
        const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
        applyTheme(prefersDarkScheme.matches);

        // Tema tercihi değiştiğinde güncelle
        prefersDarkScheme.addEventListener('change', (e) => {
            applyTheme(e.matches);
        });

        // Visual Crossing ikon isimlerini Font Awesome sınıflarına eşleme
        function getFontAwesomeIconClass(vcIconName) {
            switch (vcIconName) {
                case 'clear-day':
                    return 'fa-sun';
                case 'clear-night':
                    return 'fa-moon';
                case 'partly-cloudy-day':
                    return 'fa-cloud-sun';
                case 'partly-cloudy-night':
                    return 'fa-cloud-moon';
                case 'cloudy':
                    return 'fa-cloud';
                case 'rain':
                    return 'fa-cloud-showers-heavy';
                case 'showers-day':
                case 'showers-night':
                    return 'fa-cloud-rain';
                case 'thunder-rain':
                case 'thunder-showers-day':
                case 'thunder-showers-night':
                case 'thunder':
                    return 'fa-bolt';
                case 'snow':
                case 'snow-showers-day':
                case 'snow-showers-night':
                    return 'fa-snowflake';
                case 'fog':
                    return 'fa-smog';
                case 'wind':
                    return 'fa-wind';
                case 'sleet':
                    return 'fa-cloud-meatball'; // Karışık yağış için
                case 'hail':
                    return 'fa-cloud-showers-heavy'; // Dolu için benzer ikon
                default:
                    return 'fa-question-circle'; // Bilinmeyen ikonlar için
            }
        }

        // Hava Durumu Verisi Çekme
        async function getWeatherData(locationName, lat, lon) {
            errorMessageElem.textContent = ''; // Önceki hataları temizle
            errorMessageElem.style.display = 'none'; // Hata mesajını başlangıçta gizle

            let requestLocation = locationName; // Varsayılan olarak ilçe adı
            if (!locationName && lat && lon) {
                // Eğer ilçe adı yoksa ama koordinatlar varsa, koordinatları kullan
                requestLocation = `${lat},${lon}`;
            } else if (!locationName && !lat && !lon) {
                // Hiçbir konum bilgisi yoksa varsayılan olarak Gebze'yi kullan
                requestLocation = 'Gebze';
            }

            // Visual Crossing API isteği için URL oluşturma
            // include=current: Sadece anlık koşulları getir
            // unitGroup=metric: Metrik birimleri kullan (Celsius)
            // lang=tr: Yanıt dilini Türkçe yap (koşullar için)
            const url = `${VISUALCROSSING_BASE_URL}${requestLocation}?key=${VISUALCROSSING_API_KEY}&unitGroup=metric&include=current&lang=tr`;

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || 'Hava durumu bilgileri alınamadı.');
                }
                const data = await response.json();
                console.log('Visual Crossing API Response:', data); // API yanıtını konsola yazdır
                displayWeatherData(data);
            } catch (error) {
                errorMessageElem.textContent = `Hava durumu hatası: ${error.message}`;
                errorMessageElem.style.display = 'block'; // Hata olduğunda göster
                console.error('Hava durumu verisi çekilirken hata oluştu:', error);
            }
        }

        // Hava Durumu Verisini Ekrana Basma
        function displayWeatherData(data) {
            // Tüm hava durumu bilgi elementlerini varsayılan olarak gizle
            weatherTempElem.style.display = 'none';
            weatherHumidityElem.style.display = 'none';
            weatherCityElem.style.display = 'none';
            weatherIconElem.style.display = 'none';
            errorMessageElem.textContent = ''; // Önceki hata mesajlarını temizle
            errorMessageElem.style.display = 'none'; // Başarılı olunca hata mesajını gizle

            if (data.currentConditions) {
                const current = data.currentConditions;
                weatherTempElem.textContent = `${Math.round(current.temp)}°C`;
                weatherHumidityElem.textContent = `Nem: ${Math.round(current.humidity)}%`;

                // Eğer API yanıtında resolvedAddress varsa ve boş değilse kullan
                if (data.resolvedAddress) {
                    // resolvedAddress'ten sadece ilk kısmı (ilçe/şehir) al
                    weatherCityElem.textContent = data.resolvedAddress.split(',')[0].trim();
                } else {
                    // resolvedAddress yoksa veya boşsa "Bilinmeyen Konum" yaz
                    weatherCityElem.textContent = 'Bilinmeyen Konum';
                }

                // Elementleri görünür yap
                weatherTempElem.style.display = 'block';
                weatherHumidityElem.style.display = 'block';
                weatherCityElem.style.display = 'block';

                // Font Awesome ikon sınıfını ayarla
                const iconClass = getFontAwesomeIconClass(current.icon);
                weatherIconElem.className = `weather-icon fas ${iconClass}`; // fas: solid ikonlar için
                weatherIconElem.style.display = 'block'; // İkonu görünür yap

            } else {
                weatherTempElem.textContent = 'Bilgi yok'; // Veri yoksa "Bilgi yok" göster
                // Diğer elementlerin textContent'ini ayarlamaya gerek yok, çünkü gizlenecekler
                errorMessageElem.textContent = 'Hava durumu verisi bulunamadı. Lütfen API limitlerinizi veya konumunuzu kontrol edin.';
                errorMessageElem.style.display = 'block'; // Hata olduğunda göster
                console.error('Visual Crossing API yanıtında veri bulunamadı veya boş:', data);
            }
        }

        // Saati Güncelleme Fonksiyonu
        function updateClock() {
            const now = new Date();

            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');

            const daysOfWeek = ['Pazar', 'Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi'];
            const months = ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'];

            const dayOfWeek = daysOfWeek[now.getDay()];
            const day = now.getDate();
            const month = months[now.getMonth()];
            const year = now.getFullYear();

            clockHourElem.textContent = hours;
            clockMinuteElem.textContent = minutes;
            clockSecondElem.textContent = seconds;

            // Tarih sırasını değiştir: Gün Ay Yıl Haftanın Günü (virgül kaldırıldı)
            clockDayElem.textContent = day;
            clockMonthElem.textContent = month;
            clockYearElem.textContent = year;
            clockDayOfWeekElem.textContent = dayOfWeek;
        }

        // Koordinatlardan ilçe adını al (Nominatim kullanarak)
        async function getDistrictNameFromCoordinates(lat, lon) {
            // Nominatim API isteği için URL oluşturma
            // format=json: JSON formatında yanıt al
            // lat, lon: Enlem ve boylam
            // zoom=14: Detay seviyesi (ilçe/kasaba için uygun)
            // addressdetails=1: Adres bileşenlerini detaylı olarak al
            // accept-language=tr: Türkçe sonuçları tercih et
            const nominatimUrl = `${NOMINATIM_BASE_URL}?format=json&lat=${lat}&lon=${lon}&zoom=14&addressdetails=1&accept-language=tr`;

            try {
                const response = await fetch(nominatimUrl);
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Coğrafi kodlama bilgileri alınamadı.');
                }
                const data = await response.json();
                console.log('Nominatim API Response:', data);

                if (data.address) {
                    const address = data.address;
                    // İlçe veya benzeri bir yerleşim yeri adını öncelikli olarak ara
                    if (address.suburb) return address.suburb;
                    if (address.city_district) return address.city_district;
                    if (address.town) return address.town;
                    if (address.village) return address.village;
                    // Eğer daha spesifik bir ilçe bulunamazsa, şehri veya ilçeyi (county) dene
                    if (address.city) return address.city;
                    if (address.county) return address.county;
                    // Hiçbir uygun bileşen bulunamazsa, display_name'in ilk kısmını döndür
                    if (data.display_name) return data.display_name.split(',')[0].trim();
                }
                return null; // Uygun adres bileşeni bulunamadı
            } catch (error) {
                errorMessageElem.textContent = `Konum adı hatası: ${error.message}`;
                errorMessageElem.style.display = 'block';
                console.error('Coğrafi kodlama verisi çekilirken hata oluştu:', error);
                return null;
            }
        }

        // Kullanıcının konumunu al ve hava durumunu göster
        async function getUserLocationWeather() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    async (position) => {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        const districtName = await getDistrictNameFromCoordinates(lat, lon); // Nominatim kullanılarak ilçe adı çekilir

                        if (districtName) {
                            getWeatherData(districtName, lat, lon); // İlçe adını ve koordinatları hava durumu API'sine gönder
                        } else {
                            console.warn('İlçe adı alınamadı, koordinatlarla hava durumu çekiliyor.');
                            getWeatherData(null, lat, lon); // İlçe adı alınamazsa koordinatları kullan
                        }
                    },
                    (error) => {
                        console.warn('Konum alınamadı, varsayılan şehre geçiliyor:', error);
                        // Konum izni verilmezse veya hata olursa varsayılan şehri kullan
                        getWeatherData('Gebze'); // Varsayılan şehir adı
                    },
                    {
                        enableHighAccuracy: false,
                        timeout: 5000,
                        maximumAge: 0
                    }
                );
            } else {
                console.warn('Tarayıcı konum servislerini desteklemiyor, varsayılan şehre geçiliyor.');
                getWeatherData('Gebze'); // Geolocation desteklenmiyorsa varsayılan şehir
            }
        }

        // Sayfa yüklendiğinde çalışacak fonksiyonlar
        document.addEventListener('DOMContentLoaded', () => {
            getUserLocationWeather(); // Hava durumunu al
            updateClock(); // Saati hemen göster
            setInterval(updateClock, 1000); // Saati her saniye güncelle
            searchInput.focus(); // Arama çubuğuna odaklan

            // Arama çubuğunu sıfırlama işlevi
            searchForm.addEventListener('submit', (event) => {
                // Formun varsayılan gönderimini engelle
                event.preventDefault();

                // Arama URL'sini oluştur
                const searchQuery = searchInput.value;
                const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(searchQuery)}`;

                // Arama çubuğunu sıfırla
                searchInput.value = '';

                // Yeni sekmede arama yap
                window.open(searchUrl, '_blank');
            });
        });
    </script>
</body>
</html>
